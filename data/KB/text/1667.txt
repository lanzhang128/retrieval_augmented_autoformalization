{"text": "text\\<open>The multiplicative monoid is congruent with the quotient relation\nand gives rise to a monoid in the quotient\\<close>\nlemma (in ring0) quotientBy_mul_monoid:\n  assumes \"I\\<triangleleft>R\"\n  shows \"Congruent2(QuotientGroupRel(R, A, I),M)\" and\n \"IsAmonoid(QuotientBy(I),ProjFun2(R, QuotientGroupRel(R,A,I), M))\"\nproof-\n  {\n    fix x y s t assume \"\\<langle>x,y\\<rangle>\\<in>QuotientGroupRel(R,A,I)\" \"\\<langle>s,t\\<rangle>\\<in>QuotientGroupRel(R,A,I)\"\n    then have xyst:\"x\\<in>R\" \"y\\<in>R\" \"s\\<in>R\" \"t\\<in>R\" \"x\\<rs>y \\<in>I\" \"s\\<rs>t \\<in>I\"\n      unfolding QuotientGroupRel_def by auto\n    have \"(x\\<cdot>s)\\<rs>(y\\<cdot>t) = (x\\<cdot>s)\\<ra>\\<zero>\\<rs>(y\\<cdot>t)\"\n      using Ring_ZF_1_L3(3) Ring_ZF_1_L4(3)[OF xyst(1,3)] by auto\n    then have \"(x\\<cdot>s)\\<rs>(y\\<cdot>t) = ((x\\<cdot>s)\\<ra>((\\<rm>(y\\<cdot>s))\\<ra>(y\\<cdot>s)))\\<rs>(y\\<cdot>t)\"\n      using Ring_ZF_1_L3(7)[of \"y\\<cdot>s\"] Ring_ZF_1_L4(3)[OF xyst(2,3)] \n        Ring_ZF_1_L4(4)[of \"\\<rm>(y\\<cdot>s)\" \"y\\<cdot>s\"] Ring_ZF_1_L3(1)[of \"y\\<cdot>s\"]\n      by auto\n    then have \"(x\\<cdot>s)\\<rs>(y\\<cdot>t) = ((x\\<cdot>s)\\<rs>(y\\<cdot>s))\\<ra>((y\\<cdot>s)\\<rs>(y\\<cdot>t))\"\n      using Ring_ZF_1_L3(1) Ring_ZF_1_L4(1,2) \n          Ring_ZF_1_L10(1)[of \"x\\<cdot>s\" \"\\<rm>(y\\<cdot>s)\" \"y\\<cdot>s\"] \n          Ring_ZF_1_L10(1)[of \"(x\\<cdot>s)\\<rs>(y\\<cdot>s)\" \"y\\<cdot>s\" \"\\<rm>(y\\<cdot>t)\"]\n          Ring_ZF_1_L4(3)[OF xyst(1,3)] Ring_ZF_1_L4(3)[OF xyst(2,3)]\n          Ring_ZF_1_L4(3)[OF xyst(2,4)] by auto\n    then have \"(x\\<cdot>s)\\<rs>(y\\<cdot>t) = ((x\\<rs>y)\\<cdot>s)\\<ra>(y\\<cdot>(s\\<rs>t))\"\n      using Ring_ZF_1_L8 xyst(1-4) by auto\n    moreover\n    have \"(x\\<rs>y)\\<cdot>s \\<in>I\" using xyst(3,5) assms\n      ideal_dest_mult(1) by auto\n    moreover\n    have \"y\\<cdot>(s\\<rs>t) \\<in>I\" using xyst(2,6) assms\n      ideal_dest_mult(2) by auto\n    ultimately have \"(x\\<cdot>s)\\<rs>(y\\<cdot>t) \\<in>I\" using assms\n      ideal_dest_sum by auto\n    then have \"\\<langle>M ` \\<langle>x, s\\<rangle>, M ` \\<langle>y, t\\<rangle>\\<rangle> \\<in> QuotientGroupRel(R, A, I)\"\n      unfolding QuotientGroupRel_def using Ring_ZF_1_L4(3)\n      xyst(1-4) by auto\n  }\n  then show \"Congruent2(QuotientGroupRel(R, A, I),M)\"\n    unfolding Congruent2_def by auto moreover\n  have \"equiv(R,QuotientGroupRel(R,A,I))\" using add_group.Group_ZF_2_4_L3\n    assms unfolding Ideal_def by auto\n  moreover note mult_monoid.Group_ZF_2_2_T1\n  ultimately show \"IsAmonoid(QuotientBy(I),ProjFun2(R, QuotientGroupRel(R,A,I), M))\" unfolding QuotientBy_def[OF assms] by auto\nqed\n"}